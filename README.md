# Kafka Live Toll Data


### Generating toll data to store it in mysqldb via kafka streaming on Ubuntu.

### This is a practice project to generate live toll data and then via Kafka consuming it and uploading it to mysql database.

### Step 1: Download Kafka.

wget https://archive.apache.org/dist/kafka/2.8.0/kafka_2.12-2.8.0.tgz

### Step 2: Extract Kafka.
```
tar -xzf kafka_2.12-2.8.0.tgz
```
### Step 3: Setup MySQL server.

You can use this guide to setup MySQL server: https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-20-04

If you are using WSL (like me) and get stuck with error "System has not been booted with systemd as init system (PID 1). Can't operate.
Failed to connect to bus: Host is down" on command "sudo systemctl start mysql.service", just follow this guide: https://askubuntu.com/questions/1379425/system-has-not-been-booted-with-systemd-as-init-system-pid-1-cant-operate

### Step 4: Connect to the mysql server, using the command below.
```
mysql --host=127.0.0.1 --port=3306 --user=root --password=<YourPasswordHere>
```
### Step 5: Create a table named livetolldata with the schema to store the data generated by the traffic simulator.
```
use tolldata;

create table livetolldata(timestamp datetime,vehicle_id int,vehicle_type char(15),toll_plaza_id smallint);

exit
```
### Step 6: Install the python module kafka-python and mysql-connector-python using the pip command.
```
pip install kafka-python

pip install mysql-connector-python 
```
### Step 7: Start zookeper, make sure you are inside directory where you installed kafka
```
bin/zookeeper-server-start.sh config/zookeeper.properties
```
### Step 8: Start kafka server
```
bin/kafka-server-start.sh config/server.properties
```
### Step 9: Set your password in streaming_data_reader.py

### Step 10: Run toll_traffic_generator.py
```
python toll_traffic_generator.py
```
### Step 11: Run streaming_data_reader.py
```
python streaming_data_reader.py
```
![alt text](https://github.com/Mzsd/KafkaLiveTollData/blob/main/img1.png?raw=true)

![alt text](https://github.com/Mzsd/KafkaLiveTollData/blob/main/img2.png?raw=true)


